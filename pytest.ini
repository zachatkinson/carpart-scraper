[pytest]
# ============================================================================
# Pytest Configuration for carpart-scraper
# ============================================================================
# This configuration provides comprehensive pytest settings for the project.
# It mirrors the configuration in pyproject.toml but provides a standalone
# pytest.ini for explicit configuration management.
#
# Target: >90% code coverage across all modules
# Framework: pytest with pytest-cov, pytest-mock, pytest-asyncio
# ============================================================================

# Test Discovery
# ============================================================================
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Pytest Options
# ============================================================================
addopts =
    # Strict validation
    --strict-markers
    --strict-config

    # Verbose output
    --verbose
    --tb=short

    # Coverage configuration
    --cov=src
    --cov-report=term-missing
    --cov-report=html
    --cov-report=xml
    --cov-fail-under=90
    --no-cov-on-fail

# Test Markers
# ============================================================================
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (slower, may require external services)
    e2e: End-to-end tests (slowest, full workflow)
    slow: Marks tests as slow
    network: Tests requiring network access
    scraper: Tests for scraper functionality
    api: Tests for API endpoints
    database: Tests requiring database
    models: Tests for data models
    parser: Tests for HTML parsing
    fetcher: Tests for HTTP fetching
    memory: Memory profiling tests (slow, tracks memory usage)

# Asyncio Configuration
# ============================================================================
asyncio_mode = auto

# Warning Filters
# ============================================================================
filterwarnings =
    error
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
